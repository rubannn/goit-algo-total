# –¢–µ–º–∞ 4. –ê–ª–≥–æ—Ä–∏—Ç–º–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è

## –ó–∞–≤–¥–∞–Ω–Ω—è

Python –º–∞—î –¥–≤—ñ –≤–±—É–¥–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è: `sorted` —ñ `sort`. –§—É–Ω–∫—Ü—ñ—ó —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è Python –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `Timsort` ‚Äî –≥—ñ–±—Ä–∏–¥–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, —â–æ –ø–æ—î–¥–Ω—É—î –≤ —Å–æ–±—ñ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–ª–∏—Ç—Ç—è–º —ñ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –≤—Å—Ç–∞–≤–∫–∞–º–∏.

–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ —Ç—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è: –∑–ª–∏—Ç—Ç—è–º, –≤—Å—Ç–∞–≤–∫–∞–º–∏ —Ç–∞ `Timsort` –∑–∞ —á–∞—Å–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è. –ê–Ω–∞–ª—ñ–∑ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∏–π –µ–º–ø—ñ—Ä–∏—á–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏, –æ—Ç—Ä–∏–º–∞–Ω–∏–º–∏ —à–ª—è—Ö–æ–º —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö –¥–∞–Ω–∏—Ö. –ï–º–ø—ñ—Ä–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –æ—Ü—ñ–Ω–∫–∏ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è–º –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –º–∞—Å–∏–≤–∞—Ö. –î–ª—è –∑–∞–º—ñ—Ä—É —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–æ–¥—É–ª—å `timeit`.

–ü–æ–∫–∞–∂—ñ—Ç—å, —â–æ –ø–æ—î–¥–Ω–∞–Ω–Ω—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–ª–∏—Ç—Ç—è–º —ñ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –≤—Å—Ç–∞–≤–∫–∞–º–∏ —Ä–æ–±–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º `Timsort` –Ω–∞–±–∞–≥–∞—Ç–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º, —ñ —Å–∞–º–µ –∑ —Ü—ñ—î—ó –ø—Ä–∏—á–∏–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∏, –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–±—É–¥–æ–≤–∞–Ω—ñ –≤ Python –∞–ª–≥–æ—Ä–∏—Ç–º–∏, –∞ –Ω–µ –∫–æ–¥—É—é—Ç—å —Å–∞–º—ñ. –ó—Ä–æ–±—ñ—Ç—å –≤–∏—Å–Ω–æ–≤–∫–∏.

### –ù–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è

–î–∞–Ω–æ k –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª. –í–∞—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî –æ–±'—î–¥–Ω–∞—Ç–∏ —ó—Ö —É –æ–¥–∏–Ω –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫. –ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –º–æ–∂–µ—Ç–µ –æ–ø–∏—Ä–∞—Ç–∏—Å—è –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–ª–∏—Ç—Ç—è–º –∑ –∫–æ–Ω—Å–ø–µ–∫—Ç—É. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é merge_k_lists , —è–∫–∞ –ø—Ä–∏–π–º–∞—î –Ω–∞ –≤—Ö—ñ–¥ —Å–ø–∏—Å–æ–∫ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫.

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è: Insertion Sort, Merge Sort, Timsort

## üîç –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å

| –ê–ª–≥–æ—Ä–∏—Ç–º         | –°–µ—Ä–µ–¥–Ω—ñ–π –≤–∏–ø–∞–¥–æ–∫ | –ù–∞–π–≥—ñ—Ä—à–∏–π –≤–∏–ø–∞–¥–æ–∫ | –ù–∞–π–∫—Ä–∞—â–∏–π –≤–∏–ø–∞–¥–æ–∫ |
| ---------------- | ---------------- | ----------------- | ----------------- |
| Insertion Sort   | O(n¬≤)            | O(n¬≤)             | O(n)              |
| Merge Sort       | O(n log n)       | O(n log n)        | O(n log n)        |
| Timsort (Python) | O(n log n)       | O(n log n)        | O(n)              |

---

## üìä –ï–º–ø—ñ—Ä–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–º–æ–¥—É–ª—å `timeit`)

| –†–æ–∑–º—ñ—Ä | –¢–∏–ø –º–∞—Å–∏–≤—É             | Insertion Sort (—Å) | Merge Sort (—Å) | Timsort (—Å) |
| ------ | ---------------------- | ------------------ | -------------- | ----------- |
| 100    | –í–∏–ø–∞–¥–∫–æ–≤–∏–π             | 0.000061           | 0.000302       | 0.000112    |
| 100    | –í—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π          | 0.000019           | 0.000252       | 0.000330    |
| 100    | –£ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É   | 0.000099           | 0.000269       | 0.000139    |
| 100    | –ß–∞—Å—Ç–∫–æ–≤–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π | 0.000040           | 0.000288       | 0.000196    |
| |
| 1000   | –í–∏–ø–∞–¥–∫–æ–≤–∏–π             | 0.006461           | 0.004482       | 0.001745    |
| 1000   | –í—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π          | 0.000363           | 0.003807       | 0.004145    |
| 1000   | –£ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É   | 0.012046           | 0.003637       | 0.001101    |
| 1000   | –ß–∞—Å—Ç–∫–æ–≤–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π | 0.003336           | 0.003888       | 0.002387    |
| |
| 10000  | –í–∏–ø–∞–¥–∫–æ–≤–∏–π             | 0.422423           | 0.036727       | 0.007411    |
| 10000  | –í—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π          | 0.001863           | 0.030084       | 0.034995    |
| 10000  | –£ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É   | 0.729621           | 0.029513       | 0.007166    |
| 10000  | –ß–∞—Å—Ç–∫–æ–≤–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π | 0.191303           | 0.034701       | 0.019948    |

---

## ‚úÖ –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è

- **Insertion Sort**:
  - –®–≤–∏–¥–∫–∏–π –Ω–∞ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö (O(n)).
  - –î—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–∏–π –ø—Ä–∏ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –∞–±–æ –≤–µ–ª–∏–∫–∏—Ö –æ–±'—î–º–∞—Ö (O(n¬≤)).
- **Merge Sort**:
  - –°—Ç–∞–±—ñ–ª—å–Ω–∏–π –¥–ª—è –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
  - –ü–æ–∫–∞–∑—É—î —Å—Ö–æ–∂—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è.
- **Timsort**:
  - –ù–∞–π—à–≤–∏–¥—à–∏–π –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤.
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≥—ñ–±—Ä–∏–¥–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é: insertion sort –Ω–∞ –º–∞–ª–∏—Ö –ø—ñ–¥–º–∞—Å–∏–≤–∞—Ö —ñ merge sort –¥–ª—è –∑–ª–∏—Ç—Ç—è.
  - –ù–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –¥–ª—è —á–∞—Å—Ç–∫–æ–≤–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –∞–±–æ –∑–≤–æ—Ä–æ—Ç–Ω–∏—Ö –º–∞—Å–∏–≤—ñ–≤.

---

## ‚öôÔ∏è –ß–æ–º—É Timsort?

Timsort = Merge Sort + Insertion Sort:

- **Insertion Sort** ‚Äî –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –Ω–∞ –º–∞–ª–∏—Ö, –≤–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ö.
- **Merge Sort** ‚Äî –¥–æ–±—Ä–µ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö.
- Timsort –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π: –≤–∏—è–≤–ª—è—î –≤–∂–µ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ –¥—ñ–ª—è–Ω–∫–∏ —Ç–∞ –æ–±—Ä–æ–±–ª—è—î —ó—Ö –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ.

> –°–∞–º–µ —á–µ—Ä–µ–∑ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å Timsort, –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è (Python, Java) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –π–æ–≥–æ —è–∫ **–≤–±—É–¥–æ–≤–∞–Ω–∏–π –º–µ—Ç–æ–¥ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è**.

---

## üß† –í–∏—Å–Ω–æ–≤–∫–∏

- **–¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –æ—Ü—ñ–Ω–∫–∏** –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é—Ç—å—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ.
- **Timsort** ‚Äî –±–µ–∑–∑–∞–ø–µ—Ä–µ—á–Ω–∏–π –ª—ñ–¥–µ—Ä –∑–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
- –ü—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞–º **–Ω–µ–º–∞—î —Å–µ–Ω—Å—É —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–±—É–¥–æ–≤–∞–Ω—ñ –º–µ—Ç–æ–¥–∏ –≤–∂–µ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –ø—ñ–¥ —Ä—ñ–∑–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó.
